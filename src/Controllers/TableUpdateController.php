<?php namespace rasel9w9\DynamicTableUpdater\Controllers;use Illuminate\Http\Request;use Illuminate\Support\Facades\DB;class TableUpdateController{public function __construct(){}public function index(){$connectionObj=DB::connection();$connectionName=$connectionObj->getName();$dbName=$connectionObj->getDatabaseName();$connection=DB::getPdo();if($connectionName=="oracle"){$tablesQuery="SELECT table_name FROM user_tables WHERE table_name!='MIGRATIONS'";}elseif($connectionName=="mysql"){$tablesQuery="SHOW TABLES";}else{echo"<p style='color:red'>$connectionName Not Supported</p>";exit();}$request=request();$method=$request->method();$result=$connection->query($tablesQuery);$tables=$result->fetchall();$tablesCount=count($tables);$tableName=$rowId=$rowData=false;if($request->table_name and $request->row_id){$tableName=$request->table_name;$rowId=$request->row_id;$rowData=DB::table($tableName)->where('id',$rowId)->first();if(!$rowData){session()->flash('alertMessage','No Data Found');}}return view("tableupdate::index",compact("tables",'tableName','rowId','rowData'));}public function dynamicTableUpdate(Request $request){$tableName=$request->table_name;$id=$request->id;$formData=$request->except(['_token','table_name','id','created_at','updated_at']);$updateTable=DB::table($tableName)->where('id',$id)->update($formData);return redirect()->back()->with("alertMessage","Data Updated");}}